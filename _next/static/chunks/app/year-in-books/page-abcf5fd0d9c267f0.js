(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[508],{8168:function(e,t,a){Promise.resolve().then(a.bind(a,7724))},7724:function(e,t,a){"use strict";a.r(t);var l=a(7437),n=a(2265),s=a(2737),r=a.n(s),i=a(8075),o=a(8762);a(8877),t.default=()=>{let e=(0,o.Z)(),[t,a]=(0,n.useState)(r()().year()),[s,c]=(0,n.useState)([]),[u,d]=(0,n.useState)([]);(0,n.useEffect)(()=>{let t=Array.from(new Set(e.filter(e=>e["Date Read"]&&r()(e["Date Read"],"YYYY/MM/DD",!0).isValid()).map(e=>r()(e["Date Read"],"YYYY/MM/DD").year()))).sort((e,t)=>t-e);if(c(t),t.length>0){let l=t[0];a(l),f(l,e)}},[e]);let f=(e,t)=>{d(t.filter(t=>r()(t["Date Read"],"YYYY/MM/DD").year()===e))};return(0,l.jsxs)("div",{className:"p-8",children:[(0,l.jsxs)("div",{className:"flex flex-wrap justify-center items-center mb-8",children:[(0,l.jsx)("h1",{children:"Your"}),(0,l.jsx)("select",{value:t,onChange:t=>{let l=parseInt(t.target.value,10);a(l),f(l,e)},className:"ml-4 text-4xl font-bold bg-transparent border-none focus:outline-none custom-dropdown",children:s.map(e=>(0,l.jsx)("option",{value:e,children:e},e))}),(0,l.jsx)("h1",{children:"in Books"})]}),(0,l.jsx)("div",{className:"flex flex-wrap justify-center",children:u.map(e=>(0,l.jsx)("div",{className:"gap-1",children:(0,l.jsx)(i.Z,{isbn:e.ISBN?e.ISBN.replace(/["=]/g,""):void 0,title:e.Title,authorLf:e["Author l-f"],alt:"".concat(e.Title," by ").concat(e.Author),placeholder:(0,l.jsx)("div",{className:"placeholder-box",children:e.Title})})},e.ISBN?e.ISBN.replace(/["=]/g,""):e.Title))})]})}},8075:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var l=a(7437),n=a(2265);let s=e=>new Promise(t=>setTimeout(t,e));async function r(e,t,a){var l,n;let r,i;let o="";if(e)o="isbn:".concat(e);else{if(!t||!a)return null;let e=a?a.split(",")[0].trim():"",l=t.replace(/\s*\([^)]*\)/g,"").trim();o="intitle:".concat(encodeURIComponent(l),"+inauthor:").concat(encodeURIComponent(e))}let c=0;for(;c<3;)try{if(r=await fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(o,"&fields=items(volumeInfo/imageLinks/thumbnail)")),429===r.status){c++;let e=r.headers.get("Retry-After"),t=e?1e3*parseInt(e,10):2e3*c;await s(t)}else{i=await r.json();break}}catch(e){return console.error("Fetch error:",e),null}let u=(null==i?void 0:i.items)?i.items[0]:null;return(null==u?void 0:null===(n=u.volumeInfo)||void 0===n?void 0:null===(l=n.imageLinks)||void 0===l?void 0:l.thumbnail)||null}var i=a(6648),o=e=>{let{isbn:t,title:a,authorLf:s,alt:o,placeholder:c}=e,[u,d]=(0,n.useState)(!1),[f,h]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{let e=await r(t,a,s);e?(h(e),d(!0)):d(!1)})()},[t,a,s]),(0,l.jsxs)("div",{className:"relative h-64",style:{width:"auto",aspectRatio:"2 / 3"},children:[" ",u&&f?(0,l.jsx)(i.default,{src:f,alt:o,title:o,layout:"fill",objectFit:"contain",className:"object-contain"}):(0,l.jsx)("div",{className:"placeholder-box",title:o,children:c})]})}},8762:function(e,t,a){"use strict";var l=a(2265),n=a(8355),s=a.n(n);t.Z=()=>{let[e,t]=(0,l.useState)([]),a="/goodreads/goodreads_data";return(0,l.useEffect)(()=>{fetch("".concat(a,"/2024-05-26-goodreads_library_export.csv")).then(e=>e.text()).then(e=>{t(s().parse(e,{header:!0}).data)})},[a]),e}},8877:function(){}},function(e){e.O(0,[569,704,648,971,23,744],function(){return e(e.s=8168)}),_N_E=e.O()}]);