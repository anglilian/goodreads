(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[508],{8168:function(e,t,l){Promise.resolve().then(l.bind(l,7724))},7724:function(e,t,l){"use strict";l.r(t);var a=l(7437),n=l(2265),s=l(2737),r=l.n(s),o=l(8355),i=l.n(o),c=l(8075);l(8877),t.default=()=>{let[e,t]=(0,n.useState)([]),[l,s]=(0,n.useState)(r()().year()),[o,d]=(0,n.useState)([]);(0,n.useEffect)(()=>{fetch("".concat("/goodreads/goodreads_data","/2024-05-26-goodreads_library_export.csv")).then(e=>e.text()).then(e=>{let t=i().parse(e,{header:!0}).data,l=Array.from(new Set(t.filter(e=>e["Date Read"]&&r()(e["Date Read"],"YYYY/MM/DD",!0).isValid()).map(e=>r()(e["Date Read"],"YYYY/MM/DD").year()))).sort((e,t)=>t-e);if(d(l),l.length>0){let e=l[0];s(e),u(e,t)}})},[]);let u=(e,l)=>{t(l.filter(t=>r()(t["Date Read"],"YYYY/MM/DD").year()===e))};return(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"flex justify-center items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-center",children:"Your"}),(0,a.jsx)("select",{value:l,onChange:e=>{let l=parseInt(e.target.value,10);s(l),t([]),fetch("/goodreads_data/2024-05-26-goodreads_library_export.csv").then(e=>e.text()).then(e=>{u(l,i().parse(e,{header:!0}).data)})},className:"ml-4 text-4xl font-bold bg-transparent border-none focus:outline-none custom-dropdown",children:o.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-center",children:"in Books"})]}),(0,a.jsx)("div",{className:"grid-container",children:e.map(e=>(0,a.jsx)("div",{className:"grid-item",children:(0,a.jsx)(c.Z,{isbn:e.ISBN?e.ISBN.replace(/["=]/g,""):void 0,title:e.Title,authorLf:e["Author l-f"],alt:"".concat(e.Title," by ").concat(e.Author),placeholder:(0,a.jsx)("div",{className:"placeholder-box",children:e.Title}),sizeClass:"w-full h-full"})},e.ISBN?e.ISBN.replace(/["=]/g,""):e.Title))})]})}},8075:function(e,t,l){"use strict";l.d(t,{Z:function(){return i}});var a=l(7437),n=l(2265);let s=e=>new Promise(t=>setTimeout(t,e));async function r(e,t,l){var a,n;let r,o;let i="";if(e)i="isbn:".concat(e);else{if(!t||!l)return null;let e=l?l.split(",")[0].trim():"",a=t.replace(/\s*\([^)]*\)/g,"").trim();i="intitle:".concat(encodeURIComponent(a),"+inauthor:").concat(encodeURIComponent(e))}let c=0;for(;c<3;)try{if(r=await fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(i,"&fields=items(volumeInfo/imageLinks/thumbnail)")),429===r.status){c++;let e=r.headers.get("Retry-After"),t=e?1e3*parseInt(e,10):2e3*c;await s(t)}else{o=await r.json();break}}catch(e){return console.error("Fetch error:",e),null}let d=(null==o?void 0:o.items)?o.items[0]:null;return(null==d?void 0:null===(n=d.volumeInfo)||void 0===n?void 0:null===(a=n.imageLinks)||void 0===a?void 0:a.thumbnail)||null}var o=l(6648),i=e=>{let{isbn:t,title:l,authorLf:s,alt:i,placeholder:c,sizeClass:d}=e,[u,h]=(0,n.useState)(!1),[f,m]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{let e=await r(t,l,s);e?(m(e),h(!0)):h(!1)})()},[t,l,s]),(0,a.jsx)("div",{className:"".concat(d," flex items-center justify-center"),children:u&&f?(0,a.jsx)(o.default,{src:f,alt:i,title:i,className:"w-auto h-full object-cover",width:"200",height:"300"}):(0,a.jsx)("div",{className:"w-full h-full placeholder-box",title:i,children:c})})}},8877:function(){}},function(e){e.O(0,[569,704,648,971,23,744],function(){return e(e.s=8168)}),_N_E=e.O()}]);