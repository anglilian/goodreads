(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[508],{8168:function(e,t,a){Promise.resolve().then(a.bind(a,7724))},7724:function(e,t,a){"use strict";a.r(t);var l=a(7437),n=a(2265),s=a(2737),r=a.n(s),o=a(8355),i=a.n(o),c=a(8075);a(8877),t.default=()=>{let[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)(r()().year()),[o,d]=(0,n.useState)([]);(0,n.useEffect)(()=>{fetch("".concat("/goodreads/goodreads_data","/2024-05-26-goodreads_library_export.csv")).then(e=>e.text()).then(e=>{let t=i().parse(e,{header:!0}).data,a=Array.from(new Set(t.filter(e=>e["Date Read"]&&r()(e["Date Read"],"YYYY/MM/DD",!0).isValid()).map(e=>r()(e["Date Read"],"YYYY/MM/DD").year()))).sort((e,t)=>t-e);if(d(a),a.length>0){let e=a[0];s(e),u(e,t)}})},[]);let u=(e,a)=>{t(a.filter(t=>r()(t["Date Read"],"YYYY/MM/DD").year()===e))};return(0,l.jsxs)("div",{className:"p-8",children:[(0,l.jsxs)("div",{className:"flex flex-wrap justify-center items-center mb-8",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-center",children:"Your"}),(0,l.jsx)("select",{value:a,onChange:e=>{let a=parseInt(e.target.value,10);s(a),t([]),fetch("/goodreads_data/2024-05-26-goodreads_library_export.csv").then(e=>e.text()).then(e=>{u(a,i().parse(e,{header:!0}).data)})},className:"ml-4 text-4xl font-bold bg-transparent border-none focus:outline-none custom-dropdown",children:o.map(e=>(0,l.jsx)("option",{value:e,children:e},e))}),(0,l.jsx)("h1",{className:"text-4xl font-bold text-center",children:"in Books"})]}),(0,l.jsx)("div",{className:"grid-container",children:e.map(e=>(0,l.jsx)("div",{className:"grid-item",children:(0,l.jsx)(c.Z,{isbn:e.ISBN?e.ISBN.replace(/["=]/g,""):void 0,title:e.Title,authorLf:e["Author l-f"],alt:"".concat(e.Title," by ").concat(e.Author),placeholder:(0,l.jsx)("div",{className:"placeholder-box",children:e.Title})})},e.ISBN?e.ISBN.replace(/["=]/g,""):e.Title))})]})}},8075:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var l=a(7437),n=a(2265);let s=e=>new Promise(t=>setTimeout(t,e));async function r(e,t,a){var l,n;let r,o;let i="";if(e)i="isbn:".concat(e);else{if(!t||!a)return null;let e=a?a.split(",")[0].trim():"",l=t.replace(/\s*\([^)]*\)/g,"").trim();i="intitle:".concat(encodeURIComponent(l),"+inauthor:").concat(encodeURIComponent(e))}let c=0;for(;c<3;)try{if(r=await fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(i,"&fields=items(volumeInfo/imageLinks/thumbnail)")),429===r.status){c++;let e=r.headers.get("Retry-After"),t=e?1e3*parseInt(e,10):2e3*c;await s(t)}else{o=await r.json();break}}catch(e){return console.error("Fetch error:",e),null}let d=(null==o?void 0:o.items)?o.items[0]:null;return(null==d?void 0:null===(n=d.volumeInfo)||void 0===n?void 0:null===(l=n.imageLinks)||void 0===l?void 0:l.thumbnail)||null}var o=a(6648),i=e=>{let{isbn:t,title:a,authorLf:s,alt:i,placeholder:c}=e,[d,u]=(0,n.useState)(!1),[h,f]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{let e=await r(t,a,s);e?(f(e),u(!0)):u(!1)})()},[t,a,s]),(0,l.jsxs)("div",{className:"relative h-64",style:{width:"auto",aspectRatio:"2 / 3"},children:[" ",d&&h?(0,l.jsx)(o.default,{src:h,alt:i,title:i,layout:"fill",objectFit:"contain",className:"object-contain"}):(0,l.jsx)("div",{className:"placeholder-box h-64 aspect-[2/3]",title:i,children:c})]})}},8877:function(){}},function(e){e.O(0,[569,704,648,971,23,744],function(){return e(e.s=8168)}),_N_E=e.O()}]);