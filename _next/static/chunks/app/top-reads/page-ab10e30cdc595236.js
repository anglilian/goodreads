(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[773],{599:function(e,t,a){Promise.resolve().then(a.bind(a,3118))},3118:function(e,t,a){"use strict";a.r(t);var l=a(7437),s=a(2265),n=a(2737),i=a.n(n),r=a(8355),c=a.n(r),o=a(8075);a(8877),t.default=()=>{let[e,t]=(0,s.useState)([]),a="/goodreads/goodreads_data";(0,s.useEffect)(()=>{fetch("".concat(a,"/2024-05-26-goodreads_library_export.csv")).then(e=>e.text()).then(e=>{t(c().parse(e,{header:!0}).data)})},[a]);let n=e.filter(e=>"read"===e["Exclusive Shelf"]&&e["Date Read"]).filter(e=>"5"===e["My Rating"]).reduce((e,t)=>{let a=i()(t["Date Read"],"YYYY/MM/DD").year();return e[a]||(e[a]=[]),e[a].push(t),e},{}),r=Object.keys(n).sort((e,t)=>parseInt(t)-parseInt(e));return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen text-center",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"Top Reads by Year"}),r.map(e=>(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-medium text-gray-600",children:e}),(0,l.jsx)("div",{className:"flex flex-wrap justify-center",children:n[parseInt(e)].sort((e,t)=>i()(t["Date Read"]).diff(i()(e["Date Read"]))).slice(0,10).map(e=>(0,l.jsx)("div",{children:(0,l.jsx)(o.Z,{isbn:e.ISBN?e.ISBN.replace(/["=]/g,""):void 0,title:e.Title,authorLf:e["Author l-f"],alt:"".concat(e.Title," by ").concat(e.Author),placeholder:(0,l.jsx)("div",{className:"placeholder-box",children:e.Title})})},e.ISBN?e.ISBN.replace(/["=]/g,""):e.Title))})]},e))]})}},8075:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var l=a(7437),s=a(2265);let n=e=>new Promise(t=>setTimeout(t,e));async function i(e,t,a){var l,s;let i,r;let c="";if(e)c="isbn:".concat(e);else{if(!t||!a)return null;let e=a?a.split(",")[0].trim():"",l=t.replace(/\s*\([^)]*\)/g,"").trim();c="intitle:".concat(encodeURIComponent(l),"+inauthor:").concat(encodeURIComponent(e))}let o=0;for(;o<3;)try{if(i=await fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(c,"&fields=items(volumeInfo/imageLinks/thumbnail)")),429===i.status){o++;let e=i.headers.get("Retry-After"),t=e?1e3*parseInt(e,10):2e3*o;await n(t)}else{r=await i.json();break}}catch(e){return console.error("Fetch error:",e),null}let u=(null==r?void 0:r.items)?r.items[0]:null;return(null==u?void 0:null===(s=u.volumeInfo)||void 0===s?void 0:null===(l=s.imageLinks)||void 0===l?void 0:l.thumbnail)||null}var r=a(6648),c=e=>{let{isbn:t,title:a,authorLf:n,alt:c,placeholder:o}=e,[u,d]=(0,s.useState)(!1),[f,h]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{let e=await i(t,a,n);e?(h(e),d(!0)):d(!1)})()},[t,a,n]),(0,l.jsxs)("div",{className:"relative h-64",style:{width:"auto",aspectRatio:"2 / 3"},children:[" ",u&&f?(0,l.jsx)(r.default,{src:f,alt:c,title:c,layout:"fill",objectFit:"contain",className:"object-contain"}):(0,l.jsx)("div",{className:"placeholder-box h-64 aspect-[2/3]",title:c,children:o})]})}},8877:function(){}},function(e){e.O(0,[569,704,648,971,23,744],function(){return e(e.s=599)}),_N_E=e.O()}]);