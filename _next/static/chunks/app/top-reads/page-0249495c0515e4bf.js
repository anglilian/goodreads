(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[773],{599:function(e,t,l){Promise.resolve().then(l.bind(l,4800))},4800:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return d}});var s=l(7437),a=l(2265),n=l(2737),r=l.n(n),i=l(8355),c=l.n(i),o=l(8075),u=e=>{let{topReadsByYear:t}=e,l=Object.keys(t).sort((e,t)=>parseInt(t)-parseInt(e)),a="h-56 w-32";return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"Top Reads by Year"}),l.map(e=>(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-medium mb-4 text-gray-600",children:e}),(0,s.jsx)("div",{className:"flex flex-wrap justify-center",children:t[parseInt(e)].sort((e,t)=>r()(t["Date Read"]).diff(r()(e["Date Read"]))).slice(0,10).map(e=>(0,s.jsx)("div",{className:"m-2",children:e.ISBN||e.Title&&e["Author l-f"]?(0,s.jsx)(o.Z,{isbn:e.ISBN?e.ISBN.replace(/["=]/g,""):void 0,title:e.Title,authorLf:e["Author l-f"],alt:"".concat(e.Title," by ").concat(e.Author),placeholder:(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,s.jsx)("p",{children:e.Title})}),sizeClass:a}):(0,s.jsx)("div",{className:"".concat(a," bg-gray-200 flex items-center justify-center"),title:"".concat(e.Title," by ").concat(e.Author),children:(0,s.jsx)("p",{children:e.Title})})},e.ISBN.replace(/["=]/g,"")||e.Title))})]},e))]})};l(8877);var d=()=>{let[e,t]=(0,a.useState)([]);(0,a.useEffect)(()=>{fetch("/goodreads_data/2024-05-26-goodreads_library_export.csv").then(e=>e.text()).then(e=>{t(c().parse(e,{header:!0}).data)})},[]);let l=e.filter(e=>"read"===e["Exclusive Shelf"]&&e["Date Read"]).filter(e=>"5"===e["My Rating"]).reduce((e,t)=>{let l=r()(t["Date Read"],"YYYY/MM/DD").year();return e[l]||(e[l]=[]),e[l].push(t),e},{});return(0,s.jsx)(u,{topReadsByYear:l})}},8075:function(e,t,l){"use strict";l.d(t,{Z:function(){return c}});var s=l(7437),a=l(2265);let n=e=>new Promise(t=>setTimeout(t,e));async function r(e,t,l){var s,a;let r,i;let c="";if(e)c="isbn:".concat(e);else{if(!t||!l)return null;let e=l?l.split(",")[0].trim():"",s=t.replace(/\s*\([^)]*\)/g,"").trim();c="intitle:".concat(encodeURIComponent(s),"+inauthor:").concat(encodeURIComponent(e))}let o=0;for(;o<3;)try{if(r=await fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(c,"&fields=items(volumeInfo/imageLinks/thumbnail)")),429===r.status){o++;let e=r.headers.get("Retry-After"),t=e?1e3*parseInt(e,10):2e3*o;await n(t)}else{i=await r.json();break}}catch(e){return console.error("Fetch error:",e),null}let u=(null==i?void 0:i.items)?i.items[0]:null;return(null==u?void 0:null===(a=u.volumeInfo)||void 0===a?void 0:null===(s=a.imageLinks)||void 0===s?void 0:s.thumbnail)||null}var i=l(6648),c=e=>{let{isbn:t,title:l,authorLf:n,alt:c,placeholder:o,sizeClass:u}=e,[d,f]=(0,a.useState)(!1),[h,m]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{let e=await r(t,l,n);e?(m(e),f(!0)):f(!1)})()},[t,l,n]),(0,s.jsx)("div",{className:"".concat(u," flex items-center justify-center"),children:d&&h?(0,s.jsx)(i.default,{src:h,alt:c,title:c,className:"w-auto h-full object-cover",width:"200",height:"300"}):(0,s.jsx)("div",{className:"w-full h-full placeholder-box",title:c,children:o})})}},8877:function(){}},function(e){e.O(0,[569,704,648,971,23,744],function(){return e(e.s=599)}),_N_E=e.O()}]);